# Simple image recognition using Vue 3 + Python fastAPI

โปรเจกต์นี้เขียนขึ้นมาเพื่อศึกษาการใช้งาน Vue 3 ร่วมกับ Python fastAPI ในการทำ image recognition โดยนำ API ของ [imagga](https://imagga.com/) มาใช้ในการทำ image recognition แบบพื้นฐาน

## วิธีการติดตั้ง

### ติดตั้งส่วน frontend
1. ในโฟเดอร์ **recog-frontend** ให้ติดตั้ง dependencies โดยใช้คำสั่ง `npm install`
2. หลังจากติดตั้งเสร็จแล้วให้รันโปรเจกต์โดยใช้คำสั่ง `npm run dev`
3. เข้าไปที่ `http://localhost:5173/` ในเว็บเบราว์เซอร์เพื่อทดสอบว่าโปรเจกต์ทำงานได้ถูกต้องหรือไม่

### ติดตั้งส่วน backend
1. ในโฟเดอร์ **recog-backend** ให้ติดตั้ง dependencies โดยใช้คำสั่ง `pip install -r requirements.txt`
2. หลังจากติดตั้งเสร็จแล้วให้รันโปรเจกต์โดยใช้คำสั่ง `uvicorn main:app --reload`

## วิธีการใช้งาน
1. เข้าไปที่ `http://localhost:5173/` ในเว็บเบราว์เซอร์
![alt text](https://cdn.discordapp.com/attachments/1062024057597468713/1208731074033614848/image.png?ex=65e45989&is=65d1e489&hm=a27828dddec58c28b6d4f2e4082509be3222b3237289f16fd9fde9367bc7049b&)
**ส่วนที่ 1** Playground สำหรับทดสอบการใช้งาน โดยจะต้องถ่ายภาพก่อน คลิ๊กที่ปุ่ม **Open Camera** แล้วกดปุ่ม **Capture** เพื่อถ่ายภาพ เมื่อถ่ายแล้วรูปภาพจะแสดงขึ้นมา <br><br>
**ส่วนที่ 2** Add this person คือ ส่วนที่ให้เพิ่มรูปภาพของคนที่ต้องการจะทำการระบุตัวตน โดยให้ใส่ชื่อของคนที่ต้องการจะเพิ่มรูปภาพ และกดปุ่ม **Add** เพื่อเพิ่มรูปภาพ หรือ ดูรายการรูปภาพที่เพิ่มไว้แล้ว (ยังไม่ได้ Train) ให้คลิ๊กที่ปุ่ม **View face in database** <br><br>
**ส่วนที่ 3** Train คือ ส่วนที่ให้ทำการ Train รูปภาพที่เพิ่มไว้แล้ว <br><br>
**ส่วนที่ 4** Recognize คือ ส่วนที่ให้ทำการระบุตัวตนจากรูปภาพที่ถ่ายมา โดยให้คลิ๊กที่ปุ่ม **Recognize** ชื่อของคนที่ถูกระบุตัวตนจากรูปภาพที่ถ่ายมาจะแสดงขึ้นมา
ส่วนที่ 5 Output คือ ส่วนที่แสดงการตอบกลับทั้งหมดที่ได้จาก API ของ imagga

2. เพิ่มภาพถ่าย ![alt text](https://cdn.discordapp.com/attachments/1062024057597468713/1208733314471563274/image.png?ex=65e45b9f&is=65d1e69f&hm=dbd68ca8d60d8f0cc54335dfb62c7b0dbb1d3d5c500bd9a739ed30a49d527175&) เมื่อเข้ามาครั้งแรกจะต้องทำการเตรียมข้อมูลก่อน โดยถ่ายรูป และ ใส่ชื่อผู้ที่อยู่ในรูปให้ถูกต้องเพื่อทำการระบุตัวตน

3. เมื่อเพิ่มข้อมูลพอสมควร ให้คลิ๊กที่ปุ่ม **Train** เพื่อทำการ Train ข้อมูล ![alt text](https://cdn.discordapp.com/attachments/1062024057597468713/1208733537344299009/image.png?ex=65e45bd4&is=65d1e6d4&hm=918fe980130e3439e74309d808038b888e00c6b74435e98863e38573304661c7&)

4. Recognize รูปภาพ ![alt text](https://cdn.discordapp.com/attachments/1062024057597468713/1208733813010604133/image.png?ex=65e45c16&is=65d1e716&hm=4eeb7711082da0793bd8bad9854d96c7bea34213f3778eef212e17b69c4c695f&) ลองถ่ายภาพใหม่และทำการระบุตัวตน โดยคลิ๊กที่ปุ่ม **Recognize** และชื่อของคนที่ถูกระบุตัวตนจากรูปภาพที่ถ่ายมาจะแสดงขึ้นมา

## วิธีการทำงาน
1. เมื่อรูปภาพถูกถ่ายมา จะทำการส่งรูปภาพไปยัง API ที่สร้างขึ้นมาจาก fastAPI โดยแนบรูปภาพไปด้วย
2. FastAPI จะทำการรับรูปภาพที่ถูกส่งมา และทำการเรียกใช้งาน API ของ imagga ในการทำ image recognition
3. หลังจากที่ได้ผลลัพธ์จาก imagga แล้ว จะทำการส่งผลลัพธ์กลับไปยัง frontend และแสดงผลลัพธ์ที่ได้

## Endpoints ที่ใช้งาน

`POST /add` สำหรับเพิ่มรูปภาพของคนที่ต้องการจะทำการระบุตัวตนโดย (ยังไม่ไม่การระบุชื่อ แค่ฝากไฟล์ไว้ใน model)

`POST /recognize` สำหรับทำการระบุตัวตนจากรูปภาพที่ถ่ายมา

`GET /train` สำหรับทำการ Train รูปภาพที่เพิ่มไว้แล้ว นำมาจำแนกตัวตน และเรียนรู้จากข้อมูล

`GET /faces` สำหรับดูรายการรูปภาพที่เพิ่มไว้แล้ว (ยังไม่ได้ Train) โดยเรียกจาก SQLite Database ชื่อ `faces.db`
